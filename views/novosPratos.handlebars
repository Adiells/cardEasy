{{#section "headerLinks"}}
    <li><a href="/#">Dashboard</a></li>
    <li><a href="/#">Sobre</a></li>
    <li><a href="/#">Cardapio</a></li>
{{/section}}
<div class="form-container" id="formContainer">
    <h1><i class="fas fa-plus-circle"></i> Cadastrar Novo Prato</h1>
    
    <form enctype="multipart/form-data" role="form" id="cardapioForm">
        <!-- Campo: Nome do Prato -->
        <div class="form-group">
            <label for="nome"><i class="fas fa-utensils"></i> Nome do Prato</label>
            <input 
                type="text" 
                id="nome" 
                name="nome" 
                placeholder="Ex: Hambúrguer Artesanal" 
                required
            >
        </div>

        <!-- Campo: Descrição -->
        <div class="form-group">
            <label for="descricao"><i class="fas fa-align-left"></i> Descrição</label>
            <textarea 
                id="descricao" 
                name="descricao" 
                rows="3" 
                placeholder="Descreva os ingredientes e preparo..."
                required
            ></textarea>
        </div>

        <!-- Campo: Preço -->
        <div class="form-group">
            <label for="preco"><i class="fas fa-tag"></i> Preço (R$)</label>
            <input 
                type="number" 
                id="preco" 
                name="preco" 
                step="0.01" 
                min="0" 
                placeholder="Ex: 29.90" 
                required
            >
        </div>

        <!-- Campo: Foto -->
        <div class="form-group">
            <label for="foto"><i class="fas fa-camera"></i> Foto do Prato</label>
            <input 
                type="file" 
                id="foto" 
                name="foto" 
                accept="image/*"
                required
            >
            <small>A imagem será redimensionada para 500x500px.</small>
        </div>

        <!-- Botão de Submit -->
        <button type="submit" class="btn-submit">
            <i class="fas fa-save"></i> Cadastrar Prato
        </button>
    </form>
</div>

<style>
    /* Estilo do Formulário (mesma paleta do header) */
    body{
        background-color: rgba(47, 47, 47, 0.9);;
    }
    .form-container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 3rem;
        background: rgba(26, 26, 26, 0.9);
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        color: #f5f5f5;
    }

    .form-container h1 {
        color: #FF7A33;
        text-align: center;
        margin-bottom: 2rem;
        font-size: 2rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #FF7A33;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
        width: 96.5%;
        padding: 0.8rem;
        border: 1px solid #444;
        border-radius: 5px;
        background: #2e2e2e;
        color: #f5f5f5;
        font-family: 'Poppins', sans-serif;
    }

    .form-group textarea {
        resize: vertical;
    }

    .form-group input:focus,
    .form-group textarea:focus {
        border-color: #FF7A33;
        outline: none;
        box-shadow: 0 0 0 2px rgba(255, 122, 51, 0.3);
    }

    .btn-submit {
        width: 100%;
        padding: 1rem;
        background: #FF7A33;
        color: #1a1a1a;
        border: none;
        border-radius: 5px;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s;
    }

    .btn-submit:hover {
        background: #FF9040;
        transform: translateY(-2px);
    }

    small {
        display: block;
        margin-top: 0.3rem;
        color: #aaa;
        font-size: 0.8rem;
    }
</style>
{{#section 'script'}}
    <script>
        document.getElementById('cardapioForm')
         .addEventListener('submit', evt => {
            evt.preventDefault()
            const body = new FormData(evt.target)
            const container = document.getElementById('formContainer')
            fetch('/api/cadastro-pratos', {method: 'POST', body})
             .then(resp => {
                if(!resp.ok){
                    throw new Error(`Request failed with status ${resp.status}`)
                }
                return resp.json()
             })
             .then(json => {
                showToast('Prato cadastrado com sucesso!')
                document.getElementById('cardapioForm').reset()
             })
             .catch(err => {
                console.log('deu erro', err)
                showToast(`Houve um erro ${err}`, true)
             })
         })

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            // Configura a mensagem e cor
            toastMessage.textContent = message;
            toast.style.background = isError ? '#ff3333' : '#FF7A33';
            
            // Mostra o toast
            toast.classList.add('show');
            
            // Esconde após 3 segundos
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
{{/section}}